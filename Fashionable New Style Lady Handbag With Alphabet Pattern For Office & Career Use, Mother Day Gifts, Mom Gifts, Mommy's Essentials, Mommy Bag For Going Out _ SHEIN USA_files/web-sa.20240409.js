var _excluded9=["page_param"],_excluded10=["activity_name","activity_param"];function _typeof2(v){return _typeof2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},_typeof2(v)}function _objectWithoutProperties2(v,y){if(v==null)return{};var T=_objectWithoutPropertiesLoose2(v,y),D,K;if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(v);for(K=0;K<ie.length;K++)D=ie[K],!(y.indexOf(D)>=0)&&(!Object.prototype.propertyIsEnumerable.call(v,D)||(T[D]=v[D]))}return T}function _objectWithoutPropertiesLoose2(v,y){if(v==null)return{};var T={},D=Object.keys(v),K,ie;for(ie=0;ie<D.length;ie++)K=D[ie],!(y.indexOf(K)>=0)&&(T[K]=v[K]);return T}function ownKeys(v,y){var T=Object.keys(v);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(v);y&&(D=D.filter(function(K){return Object.getOwnPropertyDescriptor(v,K).enumerable})),T.push.apply(T,D)}return T}function _objectSpread2(v){for(var y=1;y<arguments.length;y++){var T=arguments[y]!=null?arguments[y]:{};y%2?ownKeys(Object(T),!0).forEach(function(D){_defineProperty2(v,D,T[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(T)):ownKeys(Object(T)).forEach(function(D){Object.defineProperty(v,D,Object.getOwnPropertyDescriptor(T,D))})}return v}function _toConsumableArray2(v){return _arrayWithoutHoles2(v)||_iterableToArray2(v)||_unsupportedIterableToArray2(v)||_nonIterableSpread2()}function _nonIterableSpread2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray2(v,y){if(!!v){if(typeof v=="string")return _arrayLikeToArray2(v,y);var T=Object.prototype.toString.call(v).slice(8,-1);if(T==="Object"&&v.constructor&&(T=v.constructor.name),T==="Map"||T==="Set")return Array.from(v);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return _arrayLikeToArray2(v,y)}}function _iterableToArray2(v){if(typeof Symbol!="undefined"&&v[Symbol.iterator]!=null||v["@@iterator"]!=null)return Array.from(v)}function _arrayWithoutHoles2(v){if(Array.isArray(v))return _arrayLikeToArray2(v)}function _arrayLikeToArray2(v,y){(y==null||y>v.length)&&(y=v.length);for(var T=0,D=new Array(y);T<y;T++)D[T]=v[T];return D}function _classCallCheck2(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")}function _defineProperties(v,y){for(var T=0;T<y.length;T++){var D=y[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(v,_toPropertyKey2(D.key),D)}}function _createClass2(v,y,T){return y&&_defineProperties(v.prototype,y),T&&_defineProperties(v,T),Object.defineProperty(v,"prototype",{writable:!1}),v}function _defineProperty2(v,y,T){return y=_toPropertyKey2(y),y in v?Object.defineProperty(v,y,{value:T,enumerable:!0,configurable:!0,writable:!0}):v[y]=T,v}function _toPropertyKey2(v){var y=_toPrimitive2(v,"string");return _typeof2(y)=="symbol"?y:String(y)}function _toPrimitive2(v,y){if(_typeof2(v)!="object"||!v)return v;var T=v[Symbol.toPrimitive];if(T!==void 0){var D=T.call(v,y||"default");if(_typeof2(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(v)}(function(v){typeof define=="function"&&define.amd?define(v):v()})(function(){"use strict";var v,y=function(r){var e=r.key,t=r.value,i=r.expire;try{var n={value:t,expire:i!==void 0?new Date().getTime()+i:void 0};localStorage.setItem(e,JSON.stringify(n))}catch(o){console.error("set localStorage error: "+(o==null?void 0:o.message))}},T=function(r){try{var e=localStorage.getItem(r);if(!e)return null;var t=JSON.parse(e),i=t.value,n=t.expire;return n!==void 0&&new Date().getTime()>n?(localStorage.removeItem(r),null):i}catch(o){return console.error("getLocalStorage error: "+(o==null?void 0:o.message)),null}},D=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.cookie;if(!e)return"";function t(s){var u={},l=/; */,c=s.split(l);function m(U,B){try{return B(U)}catch{return U}}for(var b=0;b<c.length;b++){var _=c[b],F=_.indexOf("=");if(!(F<0)){var O=_.substr(0,F).trim(),x=_.substr(++F,_.length).trim();x[0]=='"'&&(x=x.slice(1,-1)),u[O]==null&&(u[O]=m(x,decodeURIComponent))}}return u}function i(s){if(!(typeof s!="string"||s.substr(0,2)!=="j:"))try{return JSON.parse(s.slice(2))}catch{return}}function n(s){for(var u=Object.keys(s),l,c,m=0;m<u.length;m++)l=u[m],c=i(s[l]),c&&(s[l]=c);return s}var o=n(t(e));return o[r]||""},K=function(r){var e=new RegExp("(^|&)"+r+"=([^&]*)(&|$)","i"),t=window.location.search.substr(1).match(e);return t!=null?unescape(t[2]):null},ie=function(r,e){var t;switch(e){case"error":t=console.error;break;case"warn":t=console.warn;break;default:t=console.info;break}typeof window!="undefined"&&t(r)},Xe=function(){var r=navigator.userAgent.toLowerCase();return/(iphone os|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile)/i.test(r)?"Phone":/ipad/i.test(r)?"Tablet":"Desktop"},ee={addEvent:function(r,e,t){r.addEventListener?r.addEventListener(e,t,!1):r.attachEvent?r.attachEvent("on"+e,t):r["on"+e]=t},removeEvent:function(r,e,t){r.removeEventListener?r.removeEventListener(e,t,!1):r.detachEvent?r.detachEvent("on"+e,t):r["on"+e]=null}},Et=function(){function a(){_classCallCheck2(this,a),_defineProperty2(this,"cacheKey","sa_track_source_cache"),_defineProperty2(this,"setCache",!1),_defineProperty2(this,"top",{page_param:{tab_page_id:"",tab_id:"",mod1_id:""},activity_nm:"",activity_param:{src_module:"",src_identifier:"",tab_list:"",block_id:"",block_key:"",activity_from:"",title:"",order_status:""}}),_defineProperty2(this,"topPageList",["page_home","page_category","page_new","page_cart","page_me"])}return _createClass2(a,[{key:"defineTop",value:function(e,t){e!=null&&e.length&&(t==="add"?this.topPageList=[].concat(_toConsumableArray2(this.topPageList),_toConsumableArray2(e)):this.topPageList=e)}},{key:"track",value:function(e){if(!!e.activity_name)try{var t=this.isTopPage(e);if(!t)return this.consume(e);this.recordTop(e)}catch(i){console.error("[@shein-aidc/basis-sa/track-source]",i)}}},{key:"isTopPage",value:function(e){return!e.page_name||!this.topPageList.includes(e.page_name)?e.device_type=="pwa"&&e.page_name=="page_activity_factory"&&!e.page_param.new_flag:!(e.page_name=="page_cart"&&e.device_type=="pwa"&&e.page_param.page_from!="button_bar")}},{key:"recordTop",value:function(e){if(e.activity_name==="page_view"){var t,i,n={tab_page_id:e.tab_page_id||"",tab_id:((t=e.page_param)===null||t===void 0?void 0:t.tab_id)||"",mod1_id:((i=e.page_param)===null||i===void 0?void 0:i.mod1_id)||""};this.top.page_param=n}if(e.activity_name.startsWith("click_")){var o,s,u,l,c,m,b,_;this.top.activity_nm=e.activity_name,this.top.activity_param={src_module:(e==null||(o=e.activity_param)===null||o===void 0?void 0:o.src_module)||"",src_identifier:(e==null||(s=e.activity_param)===null||s===void 0?void 0:s.src_identifier)||"",tab_list:(e==null||(u=e.activity_param)===null||u===void 0?void 0:u.tab_list)||"",block_id:(e==null||(l=e.activity_param)===null||l===void 0||(l=l.spm_new)===null||l===void 0?void 0:l.block_id)||"",block_key:(e==null||(c=e.activity_param)===null||c===void 0||(c=c.spm_new)===null||c===void 0?void 0:c.block_key)||"",activity_from:(e==null||(m=e.activity_param)===null||m===void 0?void 0:m.activity_from)||"",title:(e==null||(b=e.activity_param)===null||b===void 0?void 0:b.title)||"",order_status:(e==null||(_=e.activity_param)===null||_===void 0?void 0:_.order_status)||""},this.setCacheData()}}},{key:"consume",value:function(e){var t=this.top;if(!this.setCache)try{var i=sessionStorage.getItem(this.cacheKey);if(i)t=JSON.parse(i);else{var n={src_module:K("src_module")||"",src_identifier:K("src_identifier")||"",tab_list:"",block_id:"",block_key:"",activity_from:"",title:"",order_status:""},o={tab_page_id:K("src_tab_page_id")||"",tab_id:"",mod1_id:""};this.top.activity_param=n,this.top.page_param=o,this.setCacheData()}}catch(s){console.error(s)}return _objectSpread2(_objectSpread2({},e),{},{top:t})}},{key:"setCacheData",value:function(){try{this.setCache=!0,sessionStorage.setItem(this.cacheKey,JSON.stringify(this.top))}catch(e){console.error(e)}}}]),a}(),Tt=new Et,se=Object.assign({is_report_general_point:!0,heart_interval:60,silent_times:30},((v=window.SA_GLOBAL_CONFIG)===null||v===void 0?void 0:v.heartbeat)||null),je=function(){function a(r){var e=this;_classCallCheck2(this,a),_defineProperty2(this,"inactivityCounter",0),_defineProperty2(this,"heartbeatTimer",0),_defineProperty2(this,"dispatch",void 0),_defineProperty2(this,"heartNo",0),se.is_report_general_point&&(+se.heart_interval<10&&(se.heart_interval=10),this.dispatch=function(){var t=function(){r("heart_active",{heart_interval:e.heartNo>0?se.heart_interval:0,heart_no:++e.heartNo}),sessionStorage.setItem("sa_analytics",JSON.stringify({heart_no:e.heartNo}))};typeof requestIdleCallback=="function"?requestIdleCallback(t):t()},this.startCounter())}return _createClass2(a,[{key:"startCounter",value:function(){var e=this;this.startHeartbeat();var t=function(){document.hidden?e.endHeartbeat():e.startHeartbeat()};document.hidden?document.addEventListener("visibilitychange",t):"mozHidden"in document?document.addEventListener("mozvisibilitychange",t):"webkitHidden"in document?document.addEventListener("webkitvisibilitychange",t):"msHidden"in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?(ee.addEvent(window,"focusin",function(){e.startHeartbeat()}),ee.addEvent(window,"focusout",function(){e.startHeartbeat()})):(ee.addEvent(window,"focus",function(){e.startHeartbeat()}),ee.addEvent(window,"blur",function(){e.endHeartbeat()}),ee.addEvent(window,"pageshow",function(){e.startHeartbeat()}),ee.addEvent(window,"pagehide",function(){e.endHeartbeat()}));var i=function(){e.inactivityCounter>=se.silent_times&&e.startHeartbeat(),e.inactivityCounter=0};ee.addEvent(window,"mousemove",i),ee.addEvent(window,"click",i),ee.addEvent(window,"keydown",i),ee.addEvent(window,"scroll",i),ee.addEvent(window,"beforeunload",function(){e.endHeartbeat()}),ee.addEvent(window,"unload",function(){e.endHeartbeat()}),setInterval(function(){e.inactivityCounter++,e.heartbeatTimer!==0&&e.inactivityCounter>=se.silent_times&&e.endHeartbeat()},se.heart_interval*1e3)}},{key:"startHeartbeat",value:function(){this.initHeartbeatTimer()}},{key:"endHeartbeat",value:function(){window.clearInterval(this.heartbeatTimer),this.heartbeatTimer=0}},{key:"initHeartbeatTimer",value:function(){if(this.heartbeatTimer)return!1;this.heartbeatTimer=window.setInterval(this.dispatch,se.heart_interval*1e3),this.dispatch()}}]),a}();_defineProperty2(je,"type","CLASS"),_defineProperty2(je,"name","heartbeat");function At(a){return{name:"heart-beat",immediate:!0,handle:function(){new je(a)}}}var Ot=function(){function a(r,e){_classCallCheck2(this,a),_defineProperty2(this,"config",void 0),_defineProperty2(this,"_SDK_",void 0),this._SDK_=r,this.config=e}return _createClass2(a,[{key:"getOSType",value:function(e){var t,i=Xe(),n={h5:function(){return i=="Phone"||i=="Tablet"?0:i=="Desktop"?1:2},pc:function(){return i=="Phone"||i=="Tablet"?0:i=="Desktop"?1:2},pwa:function(){var s=K("from"),u,l=!1;try{u=sessionStorage.getItem("pwa-fullscreen")}catch{}return(s=="fullscreen"||u)&&(l=!0),l?4:3}};return((t=n[e])===null||t===void 0?void 0:t.call(n))||""}},{key:"getSaDeviceClass",value:function(){var e=Xe();return e=="Phone"?0:e=="Desktop"?1:e=="Tablet"?2:3}},{key:"getValueFromStorage",value:function(e){var t=e||{},i=t.cookieKey,n=t.cookieValueDefault,o=D(i)||T(i)||"";return!o&&n&&(o=n),o}},{key:"getSessionId",value:function(){var e="bi_session_id",t="";try{t=T(e)}catch{}if(!t)try{t="bi_"+new Date().getTime()+"_"+Math.floor(Math.random()*1e5),y({key:e,value:t,expire:30*60*1e3})}catch{}return t}},{key:"initAction",value:function(e,t){var i,n,o,s=this,u,l=t.sendAction,c=e.environment,m=e.host,b=m===void 0?"srmdata.abc-test.sheincorp.cn":m,_=e.homeSite,F=e.deviceType,O=e.currency,x=e.country,U=e.cookieId,B=e.userId,H=e.SiteUID,q=e.appLanguage,M=e.registerFields,G=M===void 0?{}:M,z=["pc","pwa"].includes(F)?F:"h5",re=z;if(!b)return console.error("[@shein-aidc/basis-sa]","host\u7F3A\u5931\uFF0C\u8BF7\u8FDB\u884C\u521D\u59CB\u5316\u5E76\u914D\u7F6E\u57CB\u70B9\u4E0A\u62A5\u5730\u5740"),{applyFor:re};var C=[];return!((i=this.config)!==null&&i!==void 0&&i.multichannel)&&z!=="h5"&&C.push(At(function(Q,R){l({activity_name:Q,activity_param:R})})),this._SDK_.init({url:{fetch:"".concat(location.protocol,"//").concat(b,"/msg"),ajax:"".concat(location.protocol,"//").concat(b,"/msg"),image:"".concat(location.protocol,"//").concat(b,"/topic"),beacon:"".concat(location.protocol,"//").concat(b,"/beacon")},sm_device_id:window.__SmDeviceId||((n=window)===null||n===void 0||(n=n.sessionStorage)===null||n===void 0?void 0:n.getItem("SmDeviceId"))||"",brand:_,hooks:_objectSpread2(_objectSpread2({},(o=this.config)===null||o===void 0?void 0:o.hooks),{},{beforeReport:function(R,Ae){var $,he;return($=s.config)===null||$===void 0||($=$.hooks)===null||$===void 0||(he=$.beforeReport)===null||he===void 0?void 0:he.call($,Tt.track(R)||R,Ae)}}),log:c!="production"?!0:!!((u=window)!==null&&u!==void 0&&(u=u.sessionStorage)!==null&&u!==void 0&&u.getItem("sa-debug")),plugins:C}),this._SDK_.register(_objectSpread2({environment:c,sub_site:H,language:q,device_type:F,os_type:this.getOSType(re),device_class:this.getSaDeviceClass()+"".concat(re=="h5"?"_h5":""),money_type:O?function(){return s.getValueFromStorage(O)}:"",member_id:B?function(){return s.getValueFromStorage(B)}:"",cookie_id:U?function(){return s.getValueFromStorage(U)}:"",login:B?function(){return s.getValueFromStorage(B)?1:0}:0,session_id:function(){return s.getSessionId()},channel:function(){return K("url_from")||""},origin_otherid:function(){return T("originOtherId")||""}},G)),{applyFor:re}}}]),a}(),Ft=["params"],It=["able"],Ct=["send_type","headers"],xt=["data"],Dt=["plugins"],Rt=["name","params"],Lt=["log_id","count","sdk_version","pv_info_type"],jt=["name","params"];function Nt(a){return Mt(a)||Bt(a)||Ht(a)||Ut()}function Ut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ht(a,r){if(!!a){if(typeof a=="string")return Ne(a,r);var e=Object.prototype.toString.call(a).slice(8,-1);if(e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set")return Array.from(a);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ne(a,r)}}function Bt(a){if(typeof Symbol!="undefined"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Mt(a){if(Array.isArray(a))return Ne(a)}function Ne(a,r){(r==null||r>a.length)&&(r=a.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=a[e];return t}function ne(){/*!regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE*/ne=function(){return r};var a,r={},e=Object.prototype,t=e.hasOwnProperty,i=Object.defineProperty||function(h,f,d){h[f]=d.value},n=typeof Symbol=="function"?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function l(h,f,d){return Object.defineProperty(h,f,{value:d,enumerable:!0,configurable:!0,writable:!0}),h[f]}try{l({},"")}catch{l=function(d,S,A){return d[S]=A}}function c(h,f,d,S){var A=f&&f.prototype instanceof U?f:U,E=Object.create(A.prototype),V=new he(S||[]);return i(E,"_invoke",{value:Q(h,d,V)}),E}function m(h,f,d){try{return{type:"normal",arg:h.call(f,d)}}catch(S){return{type:"throw",arg:S}}}r.wrap=c;var b="suspendedStart",_="suspendedYield",F="executing",O="completed",x={};function U(){}function B(){}function H(){}var q={};l(q,o,function(){return this});var M=Object.getPrototypeOf,G=M&&M(M(Ye([])));G&&G!==e&&t.call(G,o)&&(q=G);var z=H.prototype=U.prototype=Object.create(q);function re(h){["next","throw","return"].forEach(function(f){l(h,f,function(d){return this._invoke(f,d)})})}function C(h,f){function d(A,E,V,J){var Y=m(h[A],h,E);if(Y.type!=="throw"){var pe=Y.arg,fe=pe.value;return fe&&N(fe)=="object"&&t.call(fe,"__await")?f.resolve(fe.__await).then(function(ge){d("next",ge,V,J)},function(ge){d("throw",ge,V,J)}):f.resolve(fe).then(function(ge){pe.value=ge,V(pe)},function(ge){return d("throw",ge,V,J)})}J(Y.arg)}var S;i(this,"_invoke",{value:function(E,V){function J(){return new f(function(Y,pe){d(E,V,Y,pe)})}return S=S?S.then(J,J):J()}})}function Q(h,f,d){var S=b;return function(A,E){if(S===F)throw new Error("Generator is already running");if(S===O){if(A==="throw")throw E;return{value:a,done:!0}}for(d.method=A,d.arg=E;;){var V=d.delegate;if(V){var J=R(V,d);if(J){if(J===x)continue;return J}}if(d.method==="next")d.sent=d._sent=d.arg;else if(d.method==="throw"){if(S===b)throw S=O,d.arg;d.dispatchException(d.arg)}else d.method==="return"&&d.abrupt("return",d.arg);S=F;var Y=m(h,f,d);if(Y.type==="normal"){if(S=d.done?O:_,Y.arg===x)continue;return{value:Y.arg,done:d.done}}Y.type==="throw"&&(S=O,d.method="throw",d.arg=Y.arg)}}}function R(h,f){var d=f.method,S=h.iterator[d];if(S===a)return f.delegate=null,d==="throw"&&h.iterator.return&&(f.method="return",f.arg=a,R(h,f),f.method==="throw")||d!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+d+"' method")),x;var A=m(S,h.iterator,f.arg);if(A.type==="throw")return f.method="throw",f.arg=A.arg,f.delegate=null,x;var E=A.arg;return E?E.done?(f[h.resultName]=E.value,f.next=h.nextLoc,f.method!=="return"&&(f.method="next",f.arg=a),f.delegate=null,x):E:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,x)}function Ae(h){var f={tryLoc:h[0]};1 in h&&(f.catchLoc=h[1]),2 in h&&(f.finallyLoc=h[2],f.afterLoc=h[3]),this.tryEntries.push(f)}function $(h){var f=h.completion||{};f.type="normal",delete f.arg,h.completion=f}function he(h){this.tryEntries=[{tryLoc:"root"}],h.forEach(Ae,this),this.reset(!0)}function Ye(h){if(h||h===""){var f=h[o];if(f)return f.call(h);if(typeof h.next=="function")return h;if(!isNaN(h.length)){var d=-1,S=function A(){for(;++d<h.length;)if(t.call(h,d))return A.value=h[d],A.done=!1,A;return A.value=a,A.done=!0,A};return S.next=S}}throw new TypeError(N(h)+" is not iterable")}return B.prototype=H,i(z,"constructor",{value:H,configurable:!0}),i(H,"constructor",{value:B,configurable:!0}),B.displayName=l(H,u,"GeneratorFunction"),r.isGeneratorFunction=function(h){var f=typeof h=="function"&&h.constructor;return!!f&&(f===B||(f.displayName||f.name)==="GeneratorFunction")},r.mark=function(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,H):(h.__proto__=H,l(h,u,"GeneratorFunction")),h.prototype=Object.create(z),h},r.awrap=function(h){return{__await:h}},re(C.prototype),l(C.prototype,s,function(){return this}),r.AsyncIterator=C,r.async=function(h,f,d,S,A){A===void 0&&(A=Promise);var E=new C(c(h,f,d,S),A);return r.isGeneratorFunction(f)?E:E.next().then(function(V){return V.done?V.value:E.next()})},re(z),l(z,u,"Generator"),l(z,o,function(){return this}),l(z,"toString",function(){return"[object Generator]"}),r.keys=function(h){var f=Object(h),d=[];for(var S in f)d.push(S);return d.reverse(),function A(){for(;d.length;){var E=d.pop();if(E in f)return A.value=E,A.done=!1,A}return A.done=!0,A}},r.values=Ye,he.prototype={constructor:he,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach($),!f)for(var d in this)d.charAt(0)==="t"&&t.call(this,d)&&!isNaN(+d.slice(1))&&(this[d]=a)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var d=this;function S(pe,fe){return V.type="throw",V.arg=f,d.next=pe,fe&&(d.method="next",d.arg=a),!!fe}for(var A=this.tryEntries.length-1;A>=0;--A){var E=this.tryEntries[A],V=E.completion;if(E.tryLoc==="root")return S("end");if(E.tryLoc<=this.prev){var J=t.call(E,"catchLoc"),Y=t.call(E,"finallyLoc");if(J&&Y){if(this.prev<E.catchLoc)return S(E.catchLoc,!0);if(this.prev<E.finallyLoc)return S(E.finallyLoc)}else if(J){if(this.prev<E.catchLoc)return S(E.catchLoc,!0)}else{if(!Y)throw new Error("try statement without catch or finally");if(this.prev<E.finallyLoc)return S(E.finallyLoc)}}}},abrupt:function(f,d){for(var S=this.tryEntries.length-1;S>=0;--S){var A=this.tryEntries[S];if(A.tryLoc<=this.prev&&t.call(A,"finallyLoc")&&this.prev<A.finallyLoc){var E=A;break}}E&&(f==="break"||f==="continue")&&E.tryLoc<=d&&d<=E.finallyLoc&&(E=null);var V=E?E.completion:{};return V.type=f,V.arg=d,E?(this.method="next",this.next=E.finallyLoc,x):this.complete(V)},complete:function(f,d){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&d&&(this.next=d),x},finish:function(f){for(var d=this.tryEntries.length-1;d>=0;--d){var S=this.tryEntries[d];if(S.finallyLoc===f)return this.complete(S.completion,S.afterLoc),$(S),x}},catch:function(f){for(var d=this.tryEntries.length-1;d>=0;--d){var S=this.tryEntries[d];if(S.tryLoc===f){var A=S.completion;if(A.type==="throw"){var E=A.arg;$(S)}return E}}throw new Error("illegal catch attempt")},delegateYield:function(f,d,S){return this.delegate={iterator:Ye(f),resultName:d,nextLoc:S},this.method==="next"&&(this.arg=a),x}},r}function Ze(a,r,e,t,i,n,o){try{var s=a[n](o),u=s.value}catch(l){e(l);return}s.done?r(u):Promise.resolve(u).then(t,i)}function Oe(a){return function(){var r=this,e=arguments;return new Promise(function(t,i){var n=a.apply(r,e);function o(u){Ze(n,t,i,o,s,"next",u)}function s(u){Ze(n,t,i,o,s,"throw",u)}o(void 0)})}}function ue(a,r){if(a==null)return{};var e=Wt(a,r),t,i;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);for(i=0;i<n.length;i++)t=n[i],!(r.indexOf(t)>=0)&&(!Object.prototype.propertyIsEnumerable.call(a,t)||(e[t]=a[t]))}return e}function Wt(a,r){if(a==null)return{};var e={},t=Object.keys(a),i,n;for(n=0;n<t.length;n++)i=t[n],!(r.indexOf(i)>=0)&&(e[i]=a[i]);return e}function $e(a,r){var e=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(a,i).enumerable})),e.push.apply(e,t)}return e}function L(a){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?$e(Object(e),!0).forEach(function(t){I(a,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(e)):$e(Object(e)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(e,t))})}return a}function et(a,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,tt(t.key),t)}}function ae(a,r,e){return r&&et(a.prototype,r),e&&et(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function oe(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function I(a,r,e){return r=tt(r),r in a?Object.defineProperty(a,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[r]=e,a}function tt(a){var r=Vt(a,"string");return N(r)=="symbol"?r:String(r)}function Vt(a,r){if(N(a)!="object"||!a)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var t=e.call(a,r||"default");if(N(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(a)}function N(a){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},N(a)}var qt=Object.defineProperty,Kt=function(r,e,t){return e in r?qt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},de=function(r,e,t){return Kt(r,N(e)!=="symbol"?e+"":e,t),t},_e="",Ue="undefined",Fe="object",me="string",rt="?",He="function",be="device",le="os",Ie="result",w="model",p="name",k="type",P="vendor",g="version",j="mobile",W="tablet",it="Amazon",Be="Apple",nt="ASUS",at="BlackBerry",ot="Google",st="Huawei",ut="LG",lt="Microsoft",ct="Motorola",ft="Samsung",Gt="Sharp",dt="Sony",vt="Xiaomi",ht="Zebra",Me="Chrome",ke="Firefox",zt="Windows",pt="architecture",gt="brands",mt="fullVersionList",Ce="platform",bt="platformVersion",wt="bitness",ve="sec-ch-ua",Jt=ve+"-full-version-list",Qt=ve+"-arch",Yt=ve+"-bitness",Xt=ve+"-mobile",Zt=ve+"-model",yt=ve+"-platform",$t=yt+"-version",ce="browser",We="major",xe="Mobile ",De="Opera",er="Facebook",Se=" Browser",tr=[gt,mt,j,w,Ce,bt,pt,wt],rr={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Ve=350,qe=function(r,e){for(var t in e)if(N(e[t])===Fe&&e[t].length>0){for(var i=0;i<e[t].length;i++)if(_t(e[t][i],r))return t===rt?void 0:t}else if(_t(e[t],r))return t===rt?void 0:t;return r},Ke=function(r,e){for(var t in e){var i=e[t];N(i)===Fe&&i.length==2?r[i[0]]=i[1]:r[i]=void 0}return r},_t=function(r,e){if(N(r)===Fe&&r.length>0){for(var t in r)if(Re(r[t])==Re(e))return!0;return!1}return N(r)===me?Re(e).indexOf(Re(r))!==-1:!1},kt=function(r){if(!!r){for(var e=[],t=Le(/\\?\"/g,r).split(", "),i=0;i<t.length;i++){var n=t[i].split(";v=");e[i]={brand:n[0],version:n[1]}}return e}},Re=function(r){return N(r)===me?r.toLowerCase():r},ir=function(r){return N(r)===me?Le(/[^\d\.]/g,r).split(".")[0]:void 0},Le=function(r,e){return e.replace(r,_e)},Pe=function(r){return N(r)===me?Le(/\"/g,r):r},nr=function(r,e){return N(r)===me?(r=Le(/^\s\s*/,r),N(e)===Ue?r:r.substring(0,Ve)):_e},ar=function(r,e,t){if(!(!e||!t))for(var i=0,n,o,s,u,l,c;i<t.length&&!l;){var m=t[i],b=t[i+1];for(n=o=0;n<m.length&&!l&&m[n];)if(l=m[n++].exec(e),l)for(s=0;s<b.length;s++)c=l[++o],u=b[s],N(u)===Fe&&u.length>0?u.length===2?N(u[1])===He?r[u[0]]=u[1].call(r,c):r[u[0]]=u[1]:u.length===3?N(u[1])===He&&!(u[1].exec&&u[1].test)?r[u[0]]=c?u[1].call(r,c,u[2]):void 0:r[u[0]]=c?c.replace(u[1],u[2]):void 0:u.length===4&&(r[u[0]]=c?u[3].call(r,c.replace(u[1],u[2])):void 0):r[u]=c||void 0;i+=2}},St={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},or=[[/\b(?:crmo|crios)\/([\w\.]+)/i],[g,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[g,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,g],[/opios[\/ ]+([\w\.]+)/i],[g,[p,De+" Mini"]],[/\bopr\/([\w\.]+)/i],[g,[p,De]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,g],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[g,[p,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[g,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[g,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[g,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[g,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[g,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure"+Se],g],[/\bfocus\/([\w\.]+)/i],[g,[p,ke+" Focus"]],[/\bopt\/([\w\.]+)/i],[g,[p,De+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[g,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[g,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[g,[p,De+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[g,[p,"MIUI"+Se]],[/fxios\/([\w\.-]+)/i],[g,[p,xe+ke]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360"+Se]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1"+Se],g],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],g],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,g],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,er],g],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,g],[/\bgsa\/([\w\.]+) .*safari\//i],[g,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[g,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[g,[p,Me+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,Me+" WebView"],g],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[g,[p,"Android"+Se]],[/chrome\/([\w\.]+) mobile/i],[g,[p,"Chrome"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,g],[/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i],[g,[p,xe+"Safari"]],[/iphone .*mobile(?:\/\w+ | ?)safari/i],[[p,xe+"Safari"]],[/version\/([\w\.\,]+) .*(safari)/i],[g,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[g,qe,rr]],[/(webkit|khtml)\/([\w\.]+)/i],[p,g],[/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i],[[p,xe+ke],g],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],g],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[g,[p,ke+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,g],[/(cobalt)\/([\w\.]+)/i],[p,[g,/[^\d\.]+./,_e]]],sr=[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[P,ft],[k,W]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[w,[P,ft],[k,j]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[w,[P,Be],[k,j]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[P,Be],[k,W]],[/(macintosh);/i],[w,[P,Be]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[P,Gt],[k,j]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[P,st],[k,W]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[w,[P,st],[k,j]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[w,/_/g," "],[P,vt],[k,j]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[P,vt],[k,W]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[P,"OPPO"],[k,j]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[P,"Vivo"],[k,j]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[w,[P,"Realme"],[k,j]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[P,ct],[k,j]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[P,ct],[k,W]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[P,ut],[k,W]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[P,ut],[k,j]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[P,"Lenovo"],[k,W]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[P,"Nokia"],[k,j]],[/(pixel c)\b/i],[w,[P,ot],[k,W]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[P,ot],[k,j]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[P,dt],[k,j]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[P,dt],[k,W]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[P,"OnePlus"],[k,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[P,it],[k,W]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[P,it],[k,j]],[/(playbook);[-\w\),; ]+(rim)/i],[w,P,[k,W]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[P,at],[k,j]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[P,nt],[k,W]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[P,nt],[k,j]],[/(nexus 9)/i],[w,[P,"HTC"],[k,W]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[P,[w,/_/g," "],[k,j]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[P,"Acer"],[k,W]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[P,"Meizu"],[k,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[P,w,[k,j]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i],[P,w,[k,W]],[/(surface duo)/i],[w,[P,lt],[k,W]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[P,"Fairphone"],[k,j]],[/(shield[\w ]+) b/i],[w,[P,"Nvidia"],[k,W]],[/(sprint) (\w+)/i],[P,w,[k,j]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[P,lt],[k,j]],[/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[P,ht],[k,W]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[P,ht],[k,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[w,[k,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[k,W]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[k,W]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[k,j]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[P,"Generic"]]],ur=[[/microsoft (windows) (vista|xp)/i],[p,g],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[g,qe,St]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,zt],[g,qe,St]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[g,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,"Mac OS"],[g,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[g,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,g],[/\(bb(10);/i],[g,[p,at]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[g,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[g,[p,ke+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[g,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[g,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[g,[p,Me+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,"Chrome OS"],g],[/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,g],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],g],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,g]],Pt={browser:or,device:sr,os:ur},X=typeof window=="undefined"?void 0:window.navigator,Ee=(X==null?void 0:X.userAgentData)||void 0,lr={init:I(I(I({},"".concat(ce),[p,g,We]),"".concat(be),[k,w,P]),"".concat(le),[p,g]),isIgnore:I(I({},"".concat(ce),[g,We]),"".concat(le),[g]),isIgnoreRgx:I(I({},"".concat(ce),/ ?browser$/i),"".concat(le),/ ?os$/i),toString:I(I(I({},"".concat(ce),[p,g]),"".concat(be),[P,w]),"".concat(le),[p,g])},cr=function(r){var e=lr.init[r],t=ae(function i(){oe(this,i),Ke(this,e)});return new t},fr=ae(function a(r,e){if(oe(this,a),r=r||{},Ke(this,tr),e)Ke(this,[[gt,kt(r[ve])],[mt,kt(r[Jt])],[j,/\?1/.test(r[Xt])],[w,Pe(r[Zt])],[Ce,Pe(r[yt])],[bt,Pe(r[$t])],[pt,Pe(r[Qt])],[wt,Pe(r[Yt])]]);else for(var t in r)this.hasOwnProperty(t)&&N(r[t])!==Ue&&(this[t]=r[t]);return this}),dr=function(){function a(r,e,t,i){if(oe(this,a),de(this,"itemType"),de(this,"ua"),de(this,"rgxMap"),de(this,"uaCH"),de(this,"data"),this.itemType=r,this.ua=e,this.rgxMap=t,this.uaCH=i,this.data=cr(r),this.itemType==Ie){var n=function(s){return new a(s,e,t[s],i).parseUA().get()};this.set("ua",e).set(ce,n(ce)).set(be,n(be)).set(le,n(le)).get()}return this}return ae(a,[{key:"detectFeature",value:function(){var e=X&&X.userAgent==this.ua;switch(this.itemType){case ce:e&&(X==null?void 0:X.brave)&&N(X.brave.isBrave)==He&&this.set(p,"Brave"),this.set(We,ir(this.get(g)));break;case be:e&&!this.get(k)&&Ee&&Ee[j]&&this.set(k,j),e&&this.get(w)=="Macintosh"&&X&&N(X.standalone)!==Ue&&X.maxTouchPoints&&X.maxTouchPoints>2&&this.set(w,"iPad").set(k,W);break;case le:e&&!this.get(p)&&Ee&&Ee[Ce]&&this.set(p,Ee[Ce])}return this}},{key:"get",value:function(e){return e?this.data.hasOwnProperty(e)?this.data[e]:void 0:this.data}},{key:"parseUA",value:function(){return this.itemType!=Ie&&ar(this.data,this.ua,this.rgxMap),this.detectFeature(),this}},{key:"set",value:function(e,t){return this.data[e]=t,this}}]),a}(),vr=function(){function a(r){oe(this,a),de(this,"userAgent",_e),de(this,"httpUach",{}),this.init(r)}return ae(a,[{key:"init",value:function(e){return this instanceof a?(this.userAgent=e||(X==null?void 0:X.userAgent)||_e,this.httpUach=new fr({},!0),this.setUA(this.userAgent),this):new a(e).getResult()}},{key:"createUAParserItemFunc",value:function(e){var t=e===Ie?Pt:Pt[e];return new dr(e,this.userAgent,t,this.httpUach).parseUA().get()}},{key:"getBrowser",value:function(){return this.createUAParserItemFunc(ce)}},{key:"getDevice",value:function(){return this.createUAParserItemFunc(be)}},{key:"getOS",value:function(){return this.createUAParserItemFunc(le)}},{key:"getUA",value:function(){return this.userAgent}},{key:"setUA",value:function(e){return this.userAgent=N(e)===me&&e.length>Ve?nr(e,Ve):e,this}},{key:"getResult",value:function(){return this.createUAParserItemFunc(Ie)}}]),a}(),Ge={};function hr(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,t="".concat(a,"_isForma=").concat(r);if(a&&Ge[t]&&e)return Ge[t];var i=new vr(a).getResult(),n=i.browser,o=i.device,s=i.os,u=n.name,l=u===void 0?"":u,c=n.version,m=(c==null?void 0:c.replace(/(\d+\.\d+)(\.\d+)*/,"$1"))||"",b="".concat(l,"/").concat(m),_=s.name,F=_===void 0?"":_,O=s.version,x=O===void 0?"":O,U="".concat(F,"/").concat(x),B=r?{os:U,osName:F,osVersion:x,bi:b,browser:l,browserVersion:Number.parseInt(m,10)||0,deviceType:o.type||"",deviceCompany:o.vendor||"",deviceModel:o.model||""}:i;return Ge[t]=B,B}var pr={device_type:"",home_site:"",sub_site:"",language:"",system_language:"",money_type:"",device_country:"",app_versions:"",network_type:"",ip:"",screen_pixel:"",screen_size:"",device_class:"",device_brand:"",device_name:"",device_model:"",os_type:"",os_name:"",os_versions:"",browser_name:"",browser_versions:"",session_id:"",channel:"",origin_otherid:"",traffic_source:"",market:"",start_time:"",end_time:"",environment:"",device_id:"",device_idfa:"",device_idfv:"",device_aaid:"",referer:""},gr=function(){var r=navigator.userAgent.toLowerCase();return/(iphone os|midp|rv:1.2.3.4|ucweb|android|windows ce|windows mobile)/i.test(r)?"Phone":/ipad/i.test(r)?"Tablet":"Desktop"},mr=function(){var r,e,t,i="",n=((r=navigator)===null||r===void 0?void 0:r.connection)||((e=navigator)===null||e===void 0?void 0:e.mozConnection)||((t=navigator)===null||t===void 0?void 0:t.webkitConnection);return n&&(n==null?void 0:n.effectiveType)!==void 0&&(i=n==null?void 0:n.effectiveType),i},br=function(){var r=hr(navigator.userAgent),e=r.os,t=r.browser,i=t.name,n=t.version,o=e.name,s=e.version,u=gr();return L(L({},pr),{},{os_versions:s,os_name:o,browser_name:i,browser_versions:n,device_class:u=="Phone"?0:u=="Desktop"?1:u=="Tablet"?2:3,network_type:mr(),screen_pixel:window.screen.width*(Math.round(window.devicePixelRatio)||1)+"*"+window.screen.height*(Math.round(window.devicePixelRatio)||1),traffic_source:encodeURIComponent(document.referrer)||"",system_language:navigator.language||"",referer:encodeURIComponent(window.location.href),os_type:u=="Phone"?0:u=="Desktop"?1:u=="Tablet"?2:3})},Z=function(r,e){var t;switch(e){case"error":t=console.error;break;case"warn":t=console.warn;break;default:t=console.info;break}typeof t=="function"&&t(r)},wr=function(r){return typeof r=="function"},te=function(r,e){var t=e||2;r+="";for(var i=0,n=t-r.length;i<n;i++)r="0"+r;return r},yr=function(r,e){var t=new Date||e,i="";switch(r){case"xxxx/x/x x:xx:xx":i=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+" "+t.getHours()+":"+te(t.getMinutes())+":"+te(t.getSeconds());break;case"xxxx/xx/xx xx:xx:xx":i=t.getFullYear()+"/"+te(t.getMonth()+1)+"/"+te(t.getDate())+" "+te(t.getHours())+":"+te(t.getMinutes())+":"+te(t.getSeconds());break;case"xxxx-xx-xx xx:xx:xx":i=t.getFullYear()+"-"+te(t.getMonth()+1)+"-"+te(t.getDate())+" "+te(t.getHours())+":"+te(t.getMinutes())+":"+te(t.getSeconds());break}return i},Te=function(){return Number(Math.random().toString().substr(3,6)+Date.now())},_r=function(){var r;if(typeof((r=globalThis.crypto)===null||r===void 0?void 0:r.randomUUID)=="function")return crypto.randomUUID();var e=[];return e.push(Te().toString(16).slice(0,8)),e.push(Te().toString(16).slice(0,4)),e.push(Te().toString(16).slice(0,4)),e.push(Te().toString(16).slice(0,4)),e.push(Te().toString(16).slice(0,12)),e.join("-")},kr=function a(r){if(N(r)!="object")return r;try{for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)){var t=r[e],i=N(t);switch(i){case"function":delete r[e];break;case"object":r[e]=a(t);break;case"number":r[e]=String(t);break}}return JSON.parse(JSON.stringify(r))}catch{return r}},Sr="1.0.21",Pr=function(){function a(r){oe(this,a),I(this,"config",void 0),I(this,"webviewCommonParams",{}),I(this,"webviewDynamicParams",{}),I(this,"pageEventSharePrams",{}),I(this,"canILog",!1),I(this,"waitQueue",[]),I(this,"count",0),I(this,"publicFields",{}),this.config=r,this.canILog=r.log||!1,this.publicFields=br()}return ae(a,[{key:"register",value:function(e){for(var t in e){var i=e[t];wr(i)?this.webviewDynamicParams[t]=i:this.webviewCommonParams[t]=i}}},{key:"setPvParams",value:function(e,t){var i=t||{},n=i.params,o=ue(i,Ft);switch(e){case"set":{var s,u,l=o.start_time||Date.now();this.pageEventSharePrams=L({page_param:n||{},start_time:l,tab_page_id:o!=null&&o.page_name?o.page_name+l:""},o),(s=this.config)===null||s===void 0||(s=s.hooks)===null||s===void 0||(u=s.afterSetPageData)===null||u===void 0||u.call(s,this.getReportPublicFields())}break;case"update":for(var c in t)if(N(t[c])==="object"){this.pageEventSharePrams[c]=L(L({},this.pageEventSharePrams[c]),t[c]);continue}else{this.pageEventSharePrams[c]=t[c];continue}break;case"end":this.pageEventSharePrams.page_param=L(L({},this.pageEventSharePrams.page_param),n),this.pageEventSharePrams=L(L({},this.pageEventSharePrams),{},{end_time:Date.now()},o);break}}},{key:"getUnhandledTask",value:function(){var r=Oe(ne().mark(function t(){var i,n,o,s,u;return ne().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(i=[],!this.waitQueue.length){c.next=13;break}case 2:if(!this.waitQueue.length){c.next=13;break}if(n=this.waitQueue.shift(),!n){c.next=11;break}return c.next=7,this.getReportFields(n.fields,n.requestConfig,n.extendInfo);case 7:o=c.sent,s=o.able,u=ue(o,It),s&&i.push(L({},u));case 11:c.next=2;break;case 13:return c.abrupt("return",i);case 14:case"end":return c.stop()}},t,this)}));function e(){return r.apply(this,arguments)}return e}()},{key:"getReportFields",value:function(){var r=Oe(ne().mark(function t(i){var n,o,s,u,l,c,m,b,_,F,O,x,U,B,H,q,M,G,z,re,C=arguments;return ne().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return n=C.length>1&&C[1]!==void 0?C[1]:{},o=C.length>2?C[2]:void 0,s=this.getAllFields(i,o),(o==null?void 0:o.from_event)!=="defined"&&!s.page_name&&this.canILog&&Z("\u8BF7\u68C0\u67E5pv\u4E8B\u4EF6\u662F\u5426\u6B63\u5E38\u53D1\u9001\uFF0C\u5F53\u524D\u4E8B\u4EF6page_name\u7F3A\u5931\uFF1A".concat(JSON.stringify(i)),"warn"),u=n||{},l=u.send_type,c=u.headers,m=c===void 0?{}:c,b=ue(u,Ct),_=this.config||{},F=_.url,O=_.sm_device_id,x=_.brand,U=x===void 0?"shein":x,B=_.send_type,H=l||B||"fetch",q=s,R.prev=8,R.next=11,this.beforeReportHooks(s,L(L({},o||{}),{},{send_type:H}));case 11:if(M=R.sent,typeof M=="undefined"){R.next=19;break}if(typeof M!="boolean"){R.next=18;break}if(M){R.next=16;break}return R.abrupt("return",{able:!1});case 16:R.next=19;break;case 18:N(M)==="object"&&(q=M);case 19:R.next=24;break;case 21:R.prev=21,R.t0=R.catch(8),console.error("[@shein-aidc/basis-analytics]",R.t0);case 24:if(q=kr(q),G=typeof F=="string"?F:F==null?void 0:F[H],z=L({url:G||"",headers:L(L({SmDeviceId:O||""},["fetch","ajax"].includes(H)?{"DS-ACCESS-TOKEN":"4bc3a2dd3549401b817438eede7e78da","DS-ACCESS-SITE":U}:{access_token:"NHWgg6YpfUlGukgBju2QqwRgzs0QeqQP",ds_access_site:U}),m),data:q},b),G){R.next=30;break}return this.canILog&&Z("\u7F3A\u5C11\u4E0A\u62A5\u7684\u5730\u5740","error"),R.abrupt("return",{able:!1});case 30:if(re=["fetch","ajax","image","beacon"],re.includes(H)){R.next=34;break}return this.canILog&&Z("\u4E0D\u5B58\u5728: ".concat(H," \u4E0A\u62A5\u7C7B\u578B, \u53C2\u8003").concat(re.join()),"error"),R.abrupt("return",{able:!1});case 34:return R.abrupt("return",{able:!0,sendType:H,reqParams:z,extendInfo:o,requestConfig:n});case 35:case"end":return R.stop()}},t,this,[[8,21]])}));function e(t){return r.apply(this,arguments)}return e}()},{key:"getAllFields",value:function(e,t){var i=this.getReportPublicFields(),n={};(t==null?void 0:t.from_event)!=="defined"&&(e.log_id||(this.count++,n.log_id=_r(),n.seq=this.count),n.sdk_version=Sr);var o=new Date,s=L(L(L(L({},i),e||{}),n),{},{timestamp:o.getTime(),local_time:yr("xxxx/xx/xx xx:xx:xx",o)});if(Object.keys(this.webviewDynamicParams).length)for(var u in this.webviewDynamicParams)s[u]=this.webviewDynamicParams[u]();return s}},{key:"getReportPublicFields",value:function(){var e=this.config||{},t=e.brand,i=t===void 0?"shein":t;return L(L(L({},this.publicFields),{},{home_site:i},this.webviewCommonParams),this.pageEventSharePrams)}},{key:"beforeReportHooks",value:function(e,t){var i=this;return new Promise(function(n){var o;if(typeof((o=i.config)===null||o===void 0||(o=o.hooks)===null||o===void 0?void 0:o.beforeReport)!="function")return n(void 0);try{var s,u=Object.prototype.toString.call((s=i.config)===null||s===void 0||(s=s.hooks)===null||s===void 0?void 0:s.beforeReport).slice(8,-1);if(u!=="AsyncFunction"){var l,c;return n((l=i.config)===null||l===void 0||(l=l.hooks)===null||l===void 0||(c=l.beforeReport)===null||c===void 0?void 0:c.call(l,e,t))}else{var m,b,_=null;(m=i.config)===null||m===void 0||(m=m.hooks)===null||m===void 0||(b=m.beforeReport)===null||b===void 0||b.call(m,e,t).then(function(F){_&&clearTimeout(_),_=null,n(F)}),_=setTimeout(function(){_&&clearTimeout(_),_=null,n(void 0)},5e3)}}catch(F){console.error("[@shein-aidc/basis-analytics]",F),n(void 0)}})}}]),a}(),we=function(r){if(!r)return"";try{return JSON.parse(r)}catch{return{}}},Er=function(){function a(){oe(this,a)}return ae(a,[{key:"xhr",value:function(){return typeof globalThis.XMLHttpRequest!="undefined"?new XMLHttpRequest:null}},{key:"simpleFetch",value:function(e){if(typeof fetch=="function")fetch(e.url).then(function(i){return i.status>=200&&i.status<300||i.status==304?i.text():Promise.reject(i)}).then(function(i){var n;(n=e.success)===null||n===void 0||n.call(e,we(i))}).catch(function(i){var n;(n=e.error)===null||n===void 0||n.call(e,i)});else{var t=this.xhr();if(!t)return!1;t.open(e.type||"GET",e.url,!0),(e.success||e.error)&&(t.onreadystatechange=function(){try{if(t.readyState==4){if(t.status>=200&&t.status<300||t.status==304){var i;(i=e.success)===null||i===void 0||i.call(e,we(t.responseText))}else{var n;(n=e.error)===null||n===void 0||n.call(e,we(t.responseText))}t.onreadystatechange=null,t.onload=null}}catch{t.onreadystatechange=null,t.onload=null}}),t.send(JSON.stringify(e.data))}}},{key:"fetch",value:function(r){function e(t){return r.apply(this,arguments)}return e.toString=function(){return r.toString()},e}(function(r){if(typeof fetch!="function"){this.ajax(r);return}var e=r.type||"GET";r.type||(e=r.data?"POST":"GET");var t={"Content-Type":r.content_type||"application/json"};for(var i in r.headers){var n=r.headers[i];!n||(t[i]=n)}fetch(r.url,{method:e,headers:t,body:JSON.stringify(r.data)}).then(function(o){return o.status>=200&&o.status<300||o.status==304?o.text():Promise.reject(o)}).then(function(o){var s;(s=r.success)===null||s===void 0||s.call(r,we(o))}).catch(function(o){var s;(s=r.error)===null||s===void 0||s.call(r,o)})})},{key:"ajax",value:function(e){e.type||(e.type=e.data?"POST":"GET");var t=this.xhr();if(!t)return!1;t.open(e.type,e.url,!0),(e.success||e.error)&&(t.onreadystatechange=function(){try{if(t.readyState==4){if(t.status>=200&&t.status<300||t.status==304){var s;(s=e.success)===null||s===void 0||s.call(e,we(t.responseText))}else{var u;(u=e.error)===null||u===void 0||u.call(e,we(t.responseText))}t.onreadystatechange=null,t.onload=null}}catch{t.onreadystatechange=null,t.onload=null}}),t.setRequestHeader("Content-Type",e.content_type||"application/json");var i=e.headers;for(var n in i){var o=i[n];!o||t.setRequestHeader(n,o)}t.send(JSON.stringify(e.data))}},{key:"image",value:function(e){var t=e.headers,i=t===void 0?{}:t,n=[];for(var o in i||{}){var s=i[o];!s||n.push("".concat(o,"=").concat(o=="SmDeviceId"?encodeURIComponent(s):s))}n.push("content=".concat(encodeURIComponent(JSON.stringify(e.data))));var u=e.url,l="".concat(u).concat(u.indexOf("?")>-1?"&":"?").concat(n.join("&"));if(e.success||e.error||typeof Image!="function")this.simpleFetch({url:l,success:e.success,error:e.error});else{var c=new Image;c.src=l}}},{key:"beacon",value:function(e){if((typeof navigator=="undefined"?"undefined":N(navigator))==="object"&&typeof navigator.sendBeacon=="function"){var t=new FormData;t.append("content",JSON.stringify(e.data));var i=e.headers,n=i===void 0?{}:i;for(var o in n||{}){var s=n[o];!s||t.append(o,s)}navigator.sendBeacon(e.url,t)}else console.log("[analytics]: \u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301beacon\u53D1\u9001, \u515C\u5E95\u4F7F\u7528img"),this.image(e)}}]),a}(),Tr=function(){function a(r,e){oe(this,a),I(this,"taskQueue",[]),I(this,"taskTimeout",null),I(this,"fetchFn",null),I(this,"fetchParam",null),I(this,"mergeConfig",null),this.mergeConfig=r.mergeConfig,this.fetchParam=r.baseFetchParams,this.fetchFn=e}return ae(a,[{key:"mergeToReport",value:function(e){var t,i=this,n;if(this.taskQueue.push(e),this.taskQueue.length>=(((t=this.mergeConfig)===null||t===void 0?void 0:t.fillCount)||10)){var o;(o=this.fetchFn)===null||o===void 0||o.call(this,L(L({},this.fetchParam),{},{data:this.taskQueue})),this.taskQueue=[],this.taskTimeout&&clearTimeout(this.taskTimeout),this.taskTimeout=null;return}this.taskTimeout||(this.taskTimeout=setTimeout(function(){var s;(s=i.fetchFn)===null||s===void 0||s.call(i,L(L({},i.fetchParam),{},{data:i.taskQueue})),i.taskQueue=[],clearTimeout(i.taskTimeout),i.taskTimeout=null},((n=this.mergeConfig)===null||n===void 0?void 0:n.fillCount)||100))}}]),a}(),Ar=function(){function a(r,e){oe(this,a),I(this,"config",void 0),I(this,"wk",null),I(this,"_failWk",null),I(this,"_HTTP_",void 0),I(this,"definePlugins",{}),I(this,"mergeTaskURLMap",{}),this.config=r,this.definePlugins=e,this._HTTP_=new Er,this.initFailWorker()}return ae(a,[{key:"report",value:function(e,t,i){var n,o=typeof(i==null?void 0:i.worker)!="undefined"?i==null?void 0:i.worker:(n=this.config)===null||n===void 0?void 0:n.worker;this.toReport(e,t,{workerReport:o,mergeConfig:i==null?void 0:i.mergeConfig})}},{key:"workerThreadReport",value:function(e,t,i){var n,o,s=this;if(!((n=this.definePlugins)!==null&&n!==void 0&&n.httpWorker)||!((o=this.definePlugins)!==null&&o!==void 0&&o.httpWorker.length)||typeof Worker=="undefined"){Z(typeof Worker!="undefined"?"\u8BF7\u5148\u6CE8\u518Cworker\u63D2\u4EF6":"worker \u4E0D\u53EF\u7528","error"),this.mainThreadReport(e,t,i);return}if(!this.wk){var u=new Blob([this.definePlugins.httpWorker[0]()],{type:"application/javascript"});this.wk=new Worker(URL.createObjectURL(u)),this.wk.addEventListener("message",function(l){var c,m=(c=l.data)===null||c===void 0?void 0:c.code;if(m===400){var b,_=l.data.data,F=_.sendType,O=_.reqParams;Z(l.data,"error"),(b=s._HTTP_)===null||b===void 0||b[F](O)}else if(m===500){var x,U=l.data.data,B=U.sendType,H=U.reqParams,q=U.options;!q&&((x=s._failWk)===null||x===void 0||x.postMessage({type:"record",data:{sendType:B,reqParams:H}}))}else if(m===200){var M=l.data.data;if(M!=null&&M.primaryKey){var G;(G=s._failWk)===null||G===void 0||G.postMessage({type:"delete",data:M.primaryKey})}}})}this.wk.postMessage({sendType:e,reqParams:t,options:i})}},{key:"mainThreadReport",value:function(e,t,i){var n,o=this,s=!!this._failWk&&e!="beacon";(n=this._HTTP_)===null||n===void 0||n[e](L(L({},t),{},{success:s?function(){if(i!=null&&i.primaryKey){var u;(u=o._failWk)===null||u===void 0||u.postMessage({type:"delete",data:i.primaryKey})}}:void 0,error:s?function(){var u;!i&&((u=o._failWk)===null||u===void 0||u.postMessage({type:"record",data:{sendType:e,reqParams:t}}))}:void 0}))}},{key:"toReport",value:function(e,t,i){var n=this,o=i.workerReport,s=i.mergeConfig;if(!s){o?this.workerThreadReport(e,t):this.mainThreadReport(e,t);return}var u=t.url,l="key_".concat(o?"worker":"");for(var c in s)l+="_".concat(c,"_").concat(s[c]);l+="_".concat(u);var m=t.data,b=ue(t,xt);this.mergeTaskURLMap[l]||(this.mergeTaskURLMap[l]=new Tr({mergeConfig:s,baseFetchParams:b},o?function(_){n.workerThreadReport(e,_)}:function(_){n.mainThreadReport(e,_)})),this.mergeTaskURLMap[l].mergeToReport(m)}},{key:"initFailWorker",value:function(){var e,t,i=this;if(!this._failWk&&!(!((e=this.definePlugins)!==null&&e!==void 0&&e.failRetryWorker)||!((t=this.definePlugins)!==null&&t!==void 0&&t.failRetryWorker.length)||typeof Worker=="undefined")){var n=this.definePlugins.failRetryWorker[0](),o=n.core,s=n.config,u=new Blob([o],{type:"application/javascript"});this._failWk=new Worker(URL.createObjectURL(u)),this._failWk.postMessage({type:"init",data:s}),this._failWk.postMessage({type:"retry"}),this._failWk.addEventListener("message",function(l){var c,m=(c=l.data)===null||c===void 0?void 0:c.code;if(m===400)Z(l.data,"error");else if(m===302){var b,_=(b=l.data)===null||b===void 0?void 0:b.data,F=_.primaryKey,O=_.value;if(!O)return;var x=O.sendType,U=O.reqParams;i.workerThreadReport(x,U,{primaryKey:F})}})}}}]),a}(),Or=function(){function a(){oe(this,a),I(this,"canITrack",!1),I(this,"canILog",!1),I(this,"_RP_",void 0),I(this,"_DA_",void 0),I(this,"definePlugins",{}),I(this,"defineInstPlugins",{}),this.asyncImport()}return ae(a,[{key:"asyncImport",value:function(){var e,t=this;if(typeof window!="undefined"&&!!window.sheinAnalytic202311){var i=window.sheinAnalytic202311,n=(e=window[i])===null||e===void 0?void 0:e._q;n&&n.length&&n.forEach(function(o){var s=o[0],u=o[1];typeof t[s]=="function"&&t[s].apply(t,Nt(u))}),window[i]._t=new Date().getTime(),window[i]=this}}},{key:"usePlugins",value:function(e){var t=this;try{if(!e.length)return;var i=e.filter(function(n){return n.name});if(i.length!=e.length)return Z("\u5B58\u5728\u63D2\u4EF6\u683C\u5F0F\u4E0D\u6B63\u786E\uFF0C\u8BF7\u68C0\u67E5","warn");i.forEach(function(n){t.definePlugins[n.name]||(t.definePlugins[n.name]=[]),n.immediate?n.handle():t.definePlugins[n.name].push(n.handle)})}catch(n){console.error("[@shein-aidc/basis-analytics]",n)}}},{key:"reportData",value:function(){var r=Oe(ne().mark(function t(i,n,o){var s,u,l,c,m,b,_;return ne().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.prev=0,O.next=3,this._DA_.getReportFields(i||{},n||{},o);case 3:return s=O.sent,u=s.able,l=s.sendType,c=s.reqParams,u&&(m=n||{},b=m.worker,_=m.mergeConfig,this._RP_.report(l,c,{worker:b,mergeConfig:_})),O.abrupt("return",u);case 11:return O.prev=11,O.t0=O.catch(0),console.error("[@shein-aidc/basis-analytics]",O.t0),O.abrupt("return",!1);case 15:case"end":return O.stop()}},t,this,[[0,11]])}));function e(t,i,n){return r.apply(this,arguments)}return e}()},{key:"init",value:function(e){if(typeof window!="undefined"){this.canITrack=!0,this.canILog=e.log||!1;var t=e.plugins,i=t===void 0?[]:t,n=ue(e,Dt);this.usePlugins(i),this._DA_=new Pr(n),this._RP_=new Ar(n,this.definePlugins)}}},{key:"registerPage",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"update";if(!this.canITrack)return this.canILog&&Z("\u8BF7\u5148\u6267\u884Cinit\u65B9\u6CD5","warn");this._DA_.setPvParams(t,e)}},{key:"register",value:function(e){if(!this.canITrack)return this.canILog&&Z("\u8BF7\u5148\u6267\u884Cinit\u65B9\u6CD5","warn");this._DA_.register(e)}},{key:"trackEvent",value:function(){var r=Oe(ne().mark(function t(i,n,o){var s=this,u,l,c,m,b,_,F,O,x,U,B,H,q,M,G,z;return ne().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(this.canITrack){C.next=2;break}return C.abrupt("return",this.canILog&&Z("\u8BF7\u5148\u6267\u884Cinit\u65B9\u6CD5","warn"));case 2:try{n=JSON.parse(JSON.stringify(n||{}))}catch(Q){n={},console.error("[@shein-aidc/basis-analytics]",Q)}C.t0=i,C.next=C.t0==="page_view"||C.t0==="page_leave"?6:C.t0==="event"?18:C.t0==="defined"?23:25;break;case 6:return u=n||{},l=u.name,c=u.params,m=ue(u,Rt),b=m||{},_=b.log_id,F=b.count,O=b.sdk_version,x=b.pv_info_type,U=ue(b,Lt),this._DA_.setPvParams(i=="page_view"?x||"set":"end",L({page_param:c},U)),C.next=11,this.reportData({activity_name:l||i,log_id:_,count:F,sdk_version:O},Object.assign(i=="page_leave"?{send_type:"beacon"}:{},o||{}),{from_event:i});case 11:if(B=C.sent,!(i=="page_view"&&B)){C.next=17;break}return C.next=15,this._DA_.getUnhandledTask();case 15:H=C.sent,H&&H.length&&H.forEach(function(Q){var R=Q.requestConfig||{},Ae=R.worker,$=R.mergeConfig;s._RP_.report(Q.sendType,Q.reqParams,{worker:Ae,mergeConfig:$})});case 17:return C.abrupt("break",27);case 18:if(q=n||{},M=q.name,G=q.params,z=ue(q,jt),M){C.next=21;break}return C.abrupt("return",this.canILog&&Z("\u4E8B\u4EF6\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"));case 21:return this.reportData(L({activity_name:M,activity_param:G||{}},z),o||{},{from_event:i}),C.abrupt("break",27);case 23:return this.reportData(n||{},o||{},{from_event:"defined"}),C.abrupt("break",27);case 25:return this.canILog&&Z("\u65B9\u6CD5\u540D\u4E0D\u5B58\u5728\uFF0C\u8BF7\u9605\u8BFB\u6587\u6863\u540E\u4F7F\u7528","error"),C.abrupt("break",27);case 27:case"end":return C.stop()}},t,this)}));function e(t,i,n){return r.apply(this,arguments)}return e}()}]),a}(),Fr=new Or,Ir="1.0.28",Cr=function(){function a(r){_classCallCheck2(this,a),_defineProperty2(this,"config",void 0),_defineProperty2(this,"initConfig",{}),_defineProperty2(this,"_SDK_",void 0),_defineProperty2(this,"gbPageInfo",{}),_defineProperty2(this,"applyFor","pwa"),console.info("[web-sa]: version: ".concat(Ir)),this._SDK_=Fr,this.config=r}return _createClass2(a,[{key:"updatePageInfo",value:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.gbPageInfo=_objectSpread2(_objectSpread2({},this.gbPageInfo||{page_id:"",page_name:"",page_param:"",start_time:"",end_time:"",tab_page_id:""}),t),(e=this.config)!==null&&e!==void 0&&e.multichannel||(window.getSaPageInfo=this.gbPageInfo)}},{key:"saInitAction",value:function(e){this.initConfig=e||{};var t=new Ot(this._SDK_,this.config).initAction(e||{},{sendAction:this.sendAction.bind(this)}),i=t.applyFor;this.applyFor=i,this.updatePageInfo()}},{key:"sendPageEnter",value:function(e,t){var i=this.getPageInfo(),n=i.page_param,o=_objectWithoutProperties2(i,_excluded9),s=e.start_time||o.start_time||Date.now();this.applyFor=="h5"&&(s=String(s).length==10?Number(s):Number(String(s).substring(0,10)));var u=o!=null&&o.page_name?o.page_name+s:"";this._SDK_.trackEvent("page_view",_objectSpread2(_objectSpread2(_objectSpread2({name:"page_view",params:n,tab_page_id:u},o),e),{},{start_time:s,pv_info_type:"update"}),t),this.updatePageInfo(_objectSpread2(_objectSpread2({},o),{},{tab_page_id:u,start_time:s}))}},{key:"sendPageLeave",value:function(e,t){var i=e.end_time||Date.now();this.applyFor=="h5"&&(i=String(i).length==10?Number(i):Number(String(i).substring(0,10))),this._SDK_.trackEvent("page_leave",_objectSpread2(_objectSpread2({name:"page_view",params:{}},e),{},{end_time:i}),t),this.updatePageInfo({end_time:i})}},{key:"sendDefaultEvent",value:function(e,t,i){var n=e||{},o=n.activity_name,s=n.activity_param,u=_objectWithoutProperties2(n,_excluded10);if(window.SaPageInfo){var l={};for(var c in window.SaPageInfo)["page_id","page_name","start_time","end_time"].includes(c)||(l[c]=window.SaPageInfo[c]);Object.keys(l).length&&(this._SDK_.registerPage(l),this.updatePageInfo(l))}(t.merge||t.mergeConfig)&&(i.mergeConfig=t.mergeConfig||{fillCount:10,fillTime:100}),this._SDK_.trackEvent("event",_objectSpread2({name:o,params:s||{}},u),i)}},{key:"setAction",value:function(e,t){var i=t;switch(_typeof2(e)=="object"&&(i=e),e){case"init":{if(!Object.keys(i||{}).length){ie("web-sa: init \u6307\u4EE4\u53C2\u6570\u4E0D\u5E94\u8BE5\u662F\u7A7A","error");return}if(Object.keys(this.initConfig).length)return ie("web-sa: \u8BF7\u52FF\u91CD\u590D\u521D\u59CB\u5316\uFF01\uFF01\uFF01\u5F53\u524D\u547D\u4EE4\u5E76\u672A\u5B8C\u6210\u6267\u884C\uFF01","warn");this.saInitAction(i)}break;case"setPageData":this._SDK_.registerPage(i||{},"set"),this.updatePageInfo(i);break}}},{key:"sendAction",value:function(e,t,i){var n,o,s,u=t||{},l=i||{};_typeof2(e)=="object"&&(u=e,l=t||{});var c=_typeof2(e)=="object"&&(e==null?void 0:e._url)||((n=u)===null||n===void 0?void 0:n._url)||((o=l)===null||o===void 0?void 0:o._url)||null;u&&u._url&&delete u._url,l&&l._url&&delete l._url;var m={};c&&(m.url=c),m.send_type=l.beacon?"beacon":l.image||this.applyFor=="h5"?"image":e!="pageLeave"?"fetch":"beacon";var b=[{key1:"ds_from_terminal",key2:"Ds-from-terminal",value:this.applyFor}];switch((s=this.config)!==null&&s!==void 0&&s.multichannel&&b.push({key1:"content_version",key2:"Content-Version",value:"1"}),window.__CLIENT_IPADDR__&&b.push({key1:"client_ipaddr",key2:"Client-Ipaddr",value:window.__CLIENT_IPADDR__}),window.__CLIENT_IPVER__&&b.push({key1:"client_ipver",key2:"Client-Ipver",value:window.__CLIENT_IPVER__}),m.headers=b.reduce(function(_,F){return["image","beacon"].includes(m.send_type)?_[F.key1]=F.value:_[F.key2]=F.value,_},{}),e){case"pageEnter":this.sendPageEnter(u,m);break;case"pageLeave":this.sendPageLeave(u,m);break;default:this.sendDefaultEvent(u,l,m);break}}},{key:"definedAction",value:function(e,t,i){var n={"Ds-from-terminal":this.applyFor};switch(this.applyFor){case"h5":(t==null?void 0:t.error_type)==="sdk_error"&&(n["X-Report-Source"]="h5-client-monitor");break;case"pwa":case"pc":(t==null?void 0:t.error_type)==="script_error"&&(n["X-Report-Source"]=this.applyFor=="pc"?"shein_w":"shein_PWA_new");break}var o={url:e,send_type:"fetch",headers:_objectSpread2(_objectSpread2({},n),i==null?void 0:i.headers)};this._SDK_.trackEvent("defined",t,o)}},{key:"getPageInfo",value:function(){return this.gbPageInfo}}]),a}(),xr=function(r){var e=new Cr(r);return function(t,i,n,o){try{switch(t){case"set":e.setAction(i,n);break;case"get":return e.getPageInfo();case"send":e.sendAction(i,n,o);break;case"error":e.definedAction(i,n,o);break;case"performance":e.definedAction(i,n,o);break;case"wingError":n&&(n.device_type="h5"),e.definedAction(i,n,o);break}}catch(s){ie("sdk-web-fix: ".concat(s),"error")}}},ze=typeof window.web_sa_fix!="undefined",Dr=function(r){var e=[Lr];window.analysisBeforeInterceptor&&window.analysisBeforeInterceptor.forEach(function(i){e.unshift(i)});for(var t=Promise.resolve(r);e.length;)t=t.then(e.shift());return t},Rr=function(r,e,t){try{var i=window.localStorage.getItem("autoReportTepNum")||0;window.localStorage.setItem("autoReportTepNum",String(Number(i)+1));var n=r.__is_debug__?"https://tep-test.sheincorp.cn":"https://tep.sheincorp.cn",o="".concat(n,"/api/detect/event/event/upload"),s={cases:r.cases,session:r.tokenId,raw:e};if(t&&t.beacon&&navigator&&typeof navigator.sendBeacon=="function"){var u=r||{},l=u.cases,c=u.tokenId,m=new FormData;return c&&m.append("session",c),l&&l.length&&l.forEach(function(b){m.append("cases",b)}),m.append("raw",JSON.stringify(e)),navigator.sendBeacon(o+"/form",m)}fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})}catch(b){console.error(b)}},Lr=function(r){var e=r.data,t=r.reportConfig,i=e.member_id,n=e.cookie_id,o=e.start_time,s=e.local_time,u=e.device_type,l=e.environment,c=t.send_type,m=t.from_event;if(ze){if(c=="defined")return Promise.resolve({data:!1});var b=n?parseInt(String(n).slice(-8),16)%100:0,_=b>=95;if(!_)return Promise.resolve({data:!1})}var F={data:e,type:"bi",platform:u,environment:l,member_id:i,cookie:n||"",start_up_timestamp:o,start_up_time:s,is_h5:!0};if(m!=="defined"){var O=window.localStorage.getItem("autoTrack");if(O)try{Rr(JSON.parse(O),e,{beacon:c=="beacon"})}catch(B){console.log("[web-sa]: ETP\u6821\u9A8C\u5E73\u53F0\u4E0A\u62A5\u5931\u8D25",B)}if(["debug","gray"].includes(l)){var x="https://buried-admin-api-gray03.biz.sheincorp.cn/shein/analyze";if(c=="beacon"&&navigator&&typeof navigator.sendBeacon=="function"){var U=new Blob([JSON.stringify(F)],{type:"application/json; charset=UTF-8"});return navigator.sendBeacon(x,U)}fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(F)})}}return Promise.resolve({data:e,reportConfig:t})},ye=xr({multichannel:ze,hooks:{beforeReport:function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(t){var i={data:r,reportConfig:e};Dr(i).then(function(n){t(n.data)})})}}});if(console.log(`%c \u{1F680}\u{1F680}\u65B0\u7248\u7684SA\u57CB\u70B9SDK 
`,"border-radius: 3px; background:green;color:white;font-size:12px"),ze){if(window.web_sa_fix.waitingCommands&&window.web_sa_fix.waitingCommands.length>0)for(var Je=0;Je<window.web_sa_fix.waitingCommands.length;Je++)ye.apply(ye,window.web_sa_fix.waitingCommands[Je]);window.web_sa_fix=ye}else{if(typeof window.sa!="undefined"&&window.sa.waitingCommands&&window.sa.waitingCommands.length>0)for(var Qe=0;Qe<window.sa.waitingCommands.length;Qe++)ye.apply(ye,window.sa.waitingCommands[Qe]);window.sa=window.sheinAnalysis=ye}});